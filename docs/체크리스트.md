# 이르미(IRMI) 구현 체크리스트

구현계획서 기준 Phase별 작업 항목. 각 항목 완료 시 `[ ]`를 `[x]`로 변경.

---

## Phase 1: 기반 구축

### 타입 정의 (`lib/types.ts`)

- [x] CategoryKey 타입 (`"prices" | "employment" | "selfEmployed" | "finance" | "realEstate"`)
- [x] Severity 타입 (`"critical" | "warning" | "caution" | "safe"`)
- [x] Trend 타입 (`"rising" | "stable" | "falling"`)
- [x] CategoryRisk 인터페이스 (label, score, trend, keyIssues)
- [x] SignalStats 인터페이스 (critical, warning, caution, surging)
- [x] SignalPreview 인터페이스
- [x] DashboardData 인터페이스
- [x] SignalAnalysis 인터페이스 (cause, impact, actionPoints)
- [x] Signal 인터페이스
- [x] NewsArticle 인터페이스
- [x] RegionRisk 인터페이스
- [x] RegionsData 인터페이스
- [x] ForecastScenario 인터페이스 (type, label, overallScore, description)
- [x] ForecastData 인터페이스 (period, outlook, scenarios)
- [x] BriefingHighlight 인터페이스
- [x] BriefingData 인터페이스 (forecast 필드 포함)
- [x] ChatMessage 인터페이스
- [x] ChatExample 인터페이스
- [x] ChatData 인터페이스
- [x] CrisisNode, CrisisEdge, CrisisChain, CrisisChainData 인터페이스
- [x] Policy 인터페이스 (id, title, provider, contact, url, targetCategories, relatedSignals, eligibility, benefit)
- [x] ActionGuide 인터페이스
- [x] RegionComparison 인터페이스 (regionScore, nationalAverage, difference, rank)
- [x] ReportMeta 인터페이스

### 상수 정의 (`lib/constants.ts`)

- [x] CATEGORIES 배열 (5대 카테고리: key, label, description)
- [x] SEVERITY_CONFIG (4개 등급: key, label, scoreRange, description)
- [x] REGIONS 배열 (전국, 서울, 경기, 인천, 부산, 대구, 광주, 대전)
- [x] PERIOD_OPTIONS 배열 (1w, 1m, 3m)

### 디자인 토큰 (`app/globals.css`)

- [x] `:root`에 `--danger`, `--danger-foreground` 추가
- [x] `:root`에 `--warning`, `--warning-foreground` 추가
- [x] `:root`에 `--caution`, `--caution-foreground` 추가
- [x] `:root`에 `--safe`, `--safe-foreground` 추가
- [x] `.dark`에 위 4개 변수 다크모드 값 추가
- [x] `@theme inline`에 색상 매핑 추가

### Mock 데이터 생성

- [x] `data/mock/dashboard.json` (종합 리스크 데이터)
- [x] `data/mock/signals.json` (위기 신호 7건)
- [x] `data/mock/news.json` (뉴스 기사 10건)
- [x] `data/mock/regions.json` (8개 지역 데이터)
- [x] `data/mock/briefing.json` (브리핑 + forecast 필드 포함)
- [x] `data/mock/chat-examples.json` (대화 예시 3건 + 추천 질문 4개)
- [x] `data/mock/crisis-chain.json` (노드 5개, 엣지 9개, 체인 3개)
- [x] `data/mock/policies.json` (지원 정책 6건)

### 환경변수

- [x] `.env.example` 생성 (ANTHROPIC_API_KEY, NEWS_DATA_PATH, NEXT_PUBLIC_APP_NAME, NEXT_PUBLIC_APP_DESCRIPTION)
- [x] `.env.local`이 `.gitignore`에 포함되어 있는지 확인

---

## Phase 2: 공통 레이아웃

### 필요 shadcn 컴포넌트 확인/설치

- [ ] 기존 설치 컴포넌트 확인 (alert-dialog, badge, button, card, combobox, dropdown-menu, field, input, input-group, label, select, separator, textarea)
- [ ] tabs 컴포넌트 설치
- [ ] progress 컴포넌트 설치
- [ ] dialog 컴포넌트 설치 (또는 alert-dialog 활용 확인)
- [ ] scroll-area 컴포넌트 설치
- [ ] skeleton 컴포넌트 설치
- [ ] toast 컴포넌트 설치

### 레이아웃 컴포넌트

- [ ] `components/layout/app-header.tsx` - 서비스 헤더
  - [ ] 서비스 로고/이름 (HugeIcon + 텍스트)
  - [ ] 서비스 설명 (부제)
  - [ ] 기간 필터 (Select: 최근 1주/1개월/3개월)
  - [ ] 알림 설정 버튼
- [ ] `components/layout/tab-navigation.tsx` - 탭 네비게이션
  - [ ] 대시보드 탭
  - [ ] 위기 신호 탭
  - [ ] 뉴스 분석 탭
  - [ ] 지역별 현황 탭

### 라우트 구조

- [ ] `app/layout.tsx` 수정 (루트 레이아웃에 app-header 포함)
- [ ] `app/(tabs)/layout.tsx` 생성 (탭 네비게이션 포함)
- [ ] `app/(tabs)/page.tsx` 라우트 확인 (대시보드 기본)
- [ ] `app/(tabs)/signals/page.tsx` 라우트 생성
- [ ] `app/(tabs)/news/page.tsx` 라우트 생성
- [ ] `app/(tabs)/regions/page.tsx` 라우트 생성

### 정리

- [ ] 기존 `app/page.tsx` 제거 (-> `(tabs)/page.tsx`로 이동)
- [ ] `components/component-example.tsx` 삭제
- [ ] `components/example.tsx` 삭제

---

## Phase 3: 대시보드 탭 UI + AI 브리핑 + 전망 + 리포트

### AI 브리핑 패널

- [ ] `components/dashboard/ai-briefing-panel.tsx` (차별화 #1)
  - [ ] 패널 헤더: "오늘의 민생 브리핑" + AI 아이콘 + 생성 시각
  - [ ] 브리핑 본문 (summary) + 타이핑 애니메이션
  - [ ] 핵심 하이라이트 (highlights) x3 - 카테고리 아이콘 + 메시지
  - [ ] 종합 권고 (recommendation)
  - [ ] `"use client"` 선언 (타이핑 애니메이션 상태 관리)

### 전망 패널

- [ ] `components/dashboard/forecast-panel.tsx`
  - [ ] "향후 전망" 소제목 + 기간 표시
  - [ ] 전망 텍스트 (outlook) - 타이핑 효과
  - [ ] 시나리오 비교 카드 2개 (현재 추세 vs 선제 대응)
  - [ ] 각 카드에 예상 점수 미니 게이지 + 설명

### 대시보드 헤더 + 리포트 다운로드

- [ ] `components/dashboard/dashboard-header.tsx`
  - [ ] "종합 민생 리스크 지수" 제목
  - [ ] 기준일시 표시 (lastUpdated)
- [ ] `components/dashboard/report-download-button.tsx`
  - [ ] "리포트 다운로드" 버튼 (HugeIcon + 텍스트)
  - [ ] `window.print()` 호출 로직
  - [ ] `"use client"` 선언
- [ ] `app/globals.css`에 `@media print` 스타일 추가
  - [ ] 헤더/탭 숨김
  - [ ] 데이터 영역 정리된 레이아웃

### 대시보드 요약 영역

- [ ] `components/dashboard/dashboard-summary.tsx` (게이지 + 통계 래퍼)
- [ ] `components/dashboard/risk-gauge.tsx`
  - [ ] 원형 게이지 (SVG 또는 CSS)
  - [ ] 점수 숫자 크게 표시
  - [ ] 등급별 색상 변경 (danger/warning/caution/safe 토큰)
- [ ] `components/dashboard/signal-stats.tsx`
  - [ ] 긴급 신호 N건 (danger 색상)
  - [ ] 주의 신호 N건 (warning 색상)
  - [ ] 급상승 이슈 N건

### 카테고리 위험도

- [ ] `components/dashboard/category-risk-list.tsx` (목록 래퍼)
- [ ] `components/dashboard/category-risk-bar.tsx` (x5)
  - [ ] 카테고리 아이콘 (HugeIcon)
  - [ ] 카테고리명
  - [ ] 점수 바 (프로그레스 바, 등급 색상)
  - [ ] 점수 숫자
  - [ ] 추세 아이콘 (상승/보합/하락)

### 최근 신호 미리보기

- [ ] `components/dashboard/recent-signals.tsx` (목록 래퍼)
- [ ] `components/dashboard/signal-preview-card.tsx` (x3)
  - [ ] 등급 배지
  - [ ] 카테고리 라벨
  - [ ] 신호 제목
  - [ ] 감지 날짜

### 페이지 조립

- [ ] `app/(tabs)/page.tsx` - Server Component에서 dashboard.json + briefing.json import
- [ ] `components/dashboard/dashboard-page.tsx` - 메인 레이아웃 컴포넌트
- [ ] 데이터 흐름 확인: page -> dashboard-page -> 하위 컴포넌트 props 전달

---

## Phase 4: 위기 신호 탭 UI + 대응 가이드

### 필터 바

- [ ] `components/signals/signals-filter-bar.tsx`
  - [ ] 카테고리 필터 (Select: 전체/물가/고용/자영업/금융/부동산)
  - [ ] 지역 필터 (Select: 전체/서울/경기/인천/...)

### 신호 목록

- [ ] `components/signals/signal-list.tsx` (목록 래퍼)
- [ ] `components/signals/signal-card.tsx`
  - [ ] 상단: 등급 배지 + 카테고리 라벨 + 지역
  - [ ] 중단: 신호 제목 (볼드) + 설명 텍스트
  - [ ] 하단: 관련 기사 N건 + 감지 날짜
  - [ ] "상세 분석 보기" 버튼

### 상세 분석 다이얼로그

- [ ] `components/signals/signal-detail-dialog.tsx`
  - [ ] 신호 제목
  - [ ] 근거 목록 (evidence)
  - [ ] 원인 분석 (cause)
  - [ ] 영향 범위 (impact)
  - [ ] 대응 포인트 (actionPoints)

### 대응 가이드 + 정책 연결

- [ ] `components/signals/action-guide-section.tsx`
  - [ ] "대응 가이드" 소제목
  - [ ] 실질적 행동 요령 목록 (단계별 안내)
  - [ ] "관련 지원 정책" 소제목
  - [ ] 정책 매칭 로직 (relatedSignals > targetCategories > targetRegions)
- [ ] `components/signals/policy-card.tsx`
  - [ ] 정책명 (title)
  - [ ] 지원 기관 (provider)
  - [ ] 지원 내용 요약 (benefit)
  - [ ] 대상 조건 (eligibility)
  - [ ] 연락처 (contact) - 전화 링크
  - [ ] "자세히 보기" 버튼 (url 외부 링크)

### 페이지 조립

- [ ] `app/(tabs)/signals/page.tsx` - Server Component에서 signals.json + policies.json import
- [ ] `components/signals/signals-page.tsx` - "use client", 필터 상태 관리
- [ ] 필터링 동작 확인: 카테고리 필터 + 지역 필터 적용

---

## Phase 5: 뉴스 분석 탭 UI

### 검색/필터

- [ ] `components/news/news-search-bar.tsx`
  - [ ] 키워드 검색 Input + 검색 아이콘
- [ ] `components/news/news-category-filter.tsx`
  - [ ] 카테고리 필터 (Select: 전체 카테고리)

### 뉴스 목록

- [ ] `components/news/news-list.tsx` (목록 래퍼)
- [ ] `components/news/news-card.tsx`
  - [ ] 좌측: 카테고리 배지 (색상 구분)
  - [ ] 중앙: 기사 제목 + 요약 (2줄 제한) + 키워드 태그 목록 (Badge)
  - [ ] 우측: 발행일

### 페이지 조립

- [ ] `app/(tabs)/news/page.tsx` - Server Component에서 news.json import
- [ ] `components/news/news-page.tsx` - "use client", 검색/필터 상태 관리
- [ ] 검색 동작 확인: 제목 + 키워드 배열에서 부분 일치 필터
- [ ] 카테고리 필터 동작 확인

---

## Phase 6: 지역별 현황 탭 UI + 비교/벤치마킹

### 지역 목록

- [ ] `components/regions/region-risk-list.tsx` (목록 래퍼)
- [ ] `components/regions/region-risk-row.tsx`
  - [ ] 순위 번호 표시 (점수 기준 내림차순)
  - [ ] 위험도 아이콘 (등급별 색상 원형)
  - [ ] 지역명
  - [ ] 리스크 점수 바 (등급 색상)
  - [ ] 점수 숫자 (볼드)
  - [ ] 전국 평균 대비 차이 표시 (+N점 / -N점, 색상 구분)
  - [ ] 추세 아이콘

### 지역 상세 패널

- [ ] `components/regions/region-detail-panel.tsx`
  - [ ] 지역명 + 종합 점수
  - [ ] 5대 카테고리별 점수 바
  - [ ] 추세 표시
  - [ ] 주요 이슈 텍스트

### 비교/벤치마킹

- [ ] `components/regions/region-comparison.tsx`
  - [ ] "전국 평균 대비" 소제목
  - [ ] 카테고리별 비교 바 차트 (지역 점수 바 + 전국 평균 점선 마커)
  - [ ] 평균 초과: danger/warning 색상 강조
  - [ ] 평균 미만: safe 색상
  - [ ] 종합 비교 요약 텍스트 자동 생성
  - [ ] 순위 표시: "전국 N개 지역 중 M위"
- [ ] `components/regions/region-ranking-summary.tsx`
  - [ ] "지역별 위험도 순위" 소제목
  - [ ] 가장 위험한 지역 TOP 3 (danger/warning 배경)
  - [ ] 가장 안전한 지역 TOP 3 (safe 배경)

### 페이지 조립

- [ ] `app/(tabs)/regions/page.tsx` - Server Component에서 regions.json import
- [ ] `components/regions/regions-page.tsx` - "use client", 선택 지역 상태 관리
- [ ] 지역 행 클릭 -> 상세 패널 + 비교 정보 표시
- [ ] 전국 선택 시 비교 섹션 대신 ranking-summary만 표시

---

## Phase 7: 차별화 기능 UI

### 7-A. AI 대화형 질의 ("이르미에게 물어보기")

- [ ] `components/chat/chat-fab.tsx` - 플로팅 버튼 (우하단)
- [ ] `components/chat/chat-panel.tsx` - 채팅 패널 메인
  - [ ] isOpen 상태 관리
  - [ ] messages 상태 관리
  - [ ] isLoading 상태 관리
- [ ] `components/chat/chat-header.tsx`
  - [ ] "이르미에게 물어보기" 제목 + AI 아이콘
  - [ ] 닫기 버튼
- [ ] `components/chat/chat-messages.tsx` - 메시지 목록 영역
- [ ] `components/chat/chat-message.tsx`
  - [ ] user 메시지: 우측 정렬, primary 배경
  - [ ] assistant 메시지: 좌측 정렬, secondary 배경
  - [ ] 관련 신호 링크 표시
- [ ] `components/chat/suggested-questions.tsx`
  - [ ] 추천 질문 4개 버튼
  - [ ] 초기 상태에서만 표시
- [ ] `components/chat/chat-input.tsx`
  - [ ] 텍스트 입력 + 전송 버튼
- [ ] Mock 동작 구현
  - [ ] chat-examples.json에서 키워드 매칭 로직
  - [ ] 매칭 실패 시 기본 응답
  - [ ] 타이핑 효과로 응답 출력

### 7-B. 위기 연쇄 반응 맵 (차별화 #3)

- [ ] `components/dashboard/crisis-chain-map.tsx` - 맵 메인 컨테이너
- [ ] `components/dashboard/chain-map-header.tsx`
  - [ ] "위기 전파 구조" 제목
  - [ ] 활성 체인 수 표시
- [ ] `components/dashboard/chain-visualization.tsx` - SVG 시각화
  - [ ] 5개 카테고리 노드 (정오각형 배치)
  - [ ] 노드별: 아이콘 + 이름 + 점수 + 등급 색상
  - [ ] 활성 노드: 펄스 애니메이션 (`scale` + `box-shadow`)
  - [ ] 엣지 (노드 간 화살표) - strength별 선 굵기 차등
  - [ ] 활성 체인 엣지: 흐르는 애니메이션 (`stroke-dashoffset`)
  - [ ] 비활성 엣지: 회색 점선
  - [ ] 연쇄 전파: 순차적 `animation-delay`
- [ ] `components/dashboard/chain-legend.tsx`
  - [ ] 선 굵기 범례 (strong/moderate/weak)
  - [ ] 색상 범례 (등급별)
- [ ] `components/dashboard/chain-detail.tsx`
  - [ ] 선택된 연쇄 경로 하이라이트
  - [ ] 경로 설명 텍스트
  - [ ] "물가(72) -> 자영업(81) -> 고용(58) -> 금융(63)" 형태
- [ ] 인터랙션 구현
  - [ ] 노드 클릭: 해당 카테고리 연쇄 경로 하이라이트
  - [ ] 노드 호버: 점수, 추세, 엣지 레이블 툴팁
  - [ ] 활성 체인 자동 재생 (페이지 로드 시)
- [ ] dashboard-page.tsx에 crisis-chain-map 통합

---

## Phase 8: API Route 스캐폴딩

### API Route 생성

- [ ] `app/api/dashboard/route.ts` - GET, period 파라미터 지원
- [ ] `app/api/signals/route.ts` - GET, category/region/severity 파라미터 지원
- [ ] `app/api/signals/[id]/route.ts` - GET, 개별 신호 상세
- [ ] `app/api/news/route.ts` - GET, keyword/category 파라미터 지원
- [ ] `app/api/regions/route.ts` - GET
- [ ] `app/api/policies/route.ts` - GET, category/region/signalId 파라미터 지원
- [ ] `app/api/analyze/route.ts` - POST, 인터페이스만 (Mock 반환)
- [ ] `app/api/chat/route.ts` - POST, Mock 키워드 매칭 로직
- [ ] `app/api/briefing/route.ts` - GET, period 파라미터 지원 (Mock 반환)

### 공통

- [ ] 응답 형식 통일: `{ success: boolean, data: T, error?: string }`
- [ ] 쿼리 파라미터 기반 필터링 로직

### 유틸리티

- [ ] `lib/api/news-data.ts` - JSON 데이터 로더 유틸리티
- [ ] `lib/api/anthropic.ts` - Claude API 클라이언트 (Mock 응답 반환)

### UI 전환

- [ ] 각 페이지의 import 방식을 fetch 호출로 전환 가능 확인

---

## Phase 9: [해커톤 당일] 실데이터 교체 + Claude API 연결

### [1] 환경 설정 (5분)

- [ ] `.env.local`에 `ANTHROPIC_API_KEY` 설정
- [ ] `NEWS_DATA_PATH`를 실제 JSON 경로로 변경

### [2] 데이터 교체 (10분)

- [ ] 제공된 뉴스 JSON 파일을 `data/` 디렉토리에 배치
- [ ] JSON 구조 확인 후 필요 시 `lib/types.ts` 필드 조정
- [ ] `news-data.ts` 로더의 파일 경로 전환

### [3] Claude API 기본 연결 (30분)

- [ ] `lib/api/anthropic.ts`의 Mock 응답을 실제 API 호출로 교체
- [ ] 뉴스 분류 프롬프트 적용 (섹션 6-1)
- [ ] 위험 신호 감지 프롬프트 적용 (섹션 6-2)
- [ ] 리스크 점수 산출 프롬프트 적용 (섹션 6-3)
- [ ] 요약 리포트 프롬프트 적용 (섹션 6-4)

### [4] AI 브리핑 + 전망 연결 (20분)

- [ ] `/api/briefing`에서 Mock -> Claude API 호출 전환
- [ ] 브리핑 생성 프롬프트 적용 (섹션 6-4)
- [ ] 전망 프롬프트 적용 (섹션 6-6)
- [ ] 스트리밍 응답 -> 타이핑 효과 연결

### [5] AI 대화형 질의 연결 (20분)

- [ ] `/api/chat`에서 Mock 매칭 -> Claude API 호출 전환
- [ ] 대화 프롬프트 적용 (섹션 6-5)
- [ ] 현재 위기 데이터를 system prompt 컨텍스트로 주입

### [6] API Route 활성화 + 정책 데이터 보완 (15분)

- [ ] 나머지 API Route에서 Mock -> 실제 로직 전환
- [ ] `/api/analyze`에 Claude API 호출 연결
- [ ] `policies.json` 정책 데이터 최신화 (URL, 연락처 확인)

### [7] 통합 테스트 및 발표 준비

- [ ] 대시보드 -> 위기 신호 -> 뉴스 분석 -> 지역별 현황 전체 흐름 확인
- [ ] AI 브리핑 + 전망 정상 생성 확인
- [ ] AI 대화에 다양한 질문으로 테스트
- [ ] 위기 연쇄 반응 맵 애니메이션 확인
- [ ] 대응 가이드 + 정책 연결 정상 표시 확인
- [ ] 비교/벤치마킹 수치 정상 표시 확인
- [ ] 리포트 다운로드 기능 정상 동작 확인
- [ ] 실제 데이터 기반 UI 미세 조정
- [ ] 발표 데모 시나리오 리허설

---

## 품질 체크 (전 Phase 공통)

### 코딩 규칙 준수

- [ ] 색상 하드코딩 없음 (globals.css 시맨틱 토큰만 사용)
- [ ] 이모티콘/이모지 사용 없음 (HugeIcons만 사용)
- [ ] 환경변수 코드 내 직접 기입 없음
- [ ] `tailwind.config` 파일 미생성 (Tailwind v4 PostCSS 방식)
- [ ] `components/ui/` 내 파일 직접 편집 최소화
- [ ] 클라이언트에서 API 키 직접 접근 없음

### 아키텍처 준수

- [ ] Server Component 우선 사용 (데이터 fetch)
- [ ] Client Component는 인터랙션 필요 시에만 `"use client"` 선언
- [ ] 모든 컴포넌트가 props로 데이터를 받는 구조 (데이터 소스 교체 용이)
- [ ] `cn()` 유틸리티로 클래스 조합
- [ ] 반응형 디자인 (mobile-first: sm/md/lg)
- [ ] 다크모드 지원 (`dark:` variant)

### 발표 안전장치

- [ ] 모든 차별화 기능이 Mock 모드에서 완전 동작
- [ ] API 연결 실패 시에도 Mock 데이터로 데모 가능
- [ ] 전망 패널: Mock 텍스트로도 시나리오 비교 정상 표시
- [ ] 대응 가이드: Mock 정책 데이터에 실제 기관명/연락처 포함
